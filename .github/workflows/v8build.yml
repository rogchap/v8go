name: V8 Build

# TODO find a way to trigger manually as we don't want/need to build V8 on every push
on: [push]

jobs:
    build:
        name: Build V8 for ${{ matrix.platform }}
        strategy:
            matrix:
                platform: [ubuntu-latest, macos-latest]
        runs-on: ${{ matrix.platform }}

        steps:
            - name: Checkout
              uses: actions/checkout@v1
              with:
                  submodules: true
                  fetch-depth: 1
            - name: Build V8
              run: cd deps && ./build.py
